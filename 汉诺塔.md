[B-牛牛的汉诺塔_牛客2025秋季算法编程训练联赛3-提升组](https://ac.nowcoder.com/acm/contest/120456/B)

经典递归问题

```java
import java.io.*;
import java.util.*;

public class Main {
    static BufferedReader br;
    static PrintWriter pw;
    static final int MOD = 1000000007;

    public static void main(String[] args) throws IOException {
        br = new BufferedReader(new InputStreamReader(System.in));
        pw = new PrintWriter(new BufferedWriter(new OutputStreamWriter(System.out)));

        int t = 1;
        while(t-- > 0){
            solve();
        }
        pw.flush();
        pw.close();br.close();
    }
    static long[][]dp;
    public static void solve() throws IOException {
        int n = Integer.parseInt(br.readLine());
        dp = new long[3][3];
        //dfs(n,'A','B','C');
        getDp(n);
        long s = 0;
        for(int i = 0;i < 3;i++){
            for(int j = 0;j < 3;j++){
                if(i == j)continue;
                char x = get(i),y = get(j);
                s += dp[i][j];
                pw.println(x + "->" + y + ":" + (dp[i][j]));
            }
        }
        pw.println("SUM:" + s);
    }
    public static void dfs(int n, char a, char b, char c){
        if(n == 1){
            dp[(int)(a - 'A')][(int)(c - 'A')] += 1;
            return ;
        }
        dfs(n - 1,a ,c,b);//021 -> 012
        dp[(int)(a - 'A')][(int)(c - 'A')] += 1;//02 += 1
        dfs(n - 1,b ,a,c);//102 -> 012
    }
    public static void getDp(int n){
        dp[0][2] = 1;
        int[]mp1 = new int[]{0,2,1},mp2 = new int[]{1,0,2};
        for(int k = 2;k <= n;k++){
            long[][]temp = new long[3][3];
            for(int i = 0;i < 3;i++){
                for(int j = 0;j < 3;j++){
                    if(i == j)continue;
                    temp[i][j] += dp[mp1[i]][mp1[j]];
                }
            }
            temp[0][2] += 1;
            for(int i = 0;i < 3;i++){
                for(int j = 0;j < 3;j++){
                    if(i == j)continue;
                    temp[i][j] += dp[mp2[i]][mp2[j]];
                }
            }
            dp = temp;
        }
    }
    public static char get(int x){
        if(x == 0)return 'A';
        else if(x == 1)return 'B';
        else return 'C';
    }

}
```
