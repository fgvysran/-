[3397. 执行操作后不同元素的最大数量 - 力扣（LeetCode）](https://leetcode.cn/problems/maximum-number-of-distinct-elements-after-operations/description/?envType=daily-question&envId=2025-10-18)

该题贪心核心：能选最小的不同数就选最小的，这样后面的数才有更多空间选择

### 💡思路解析💡💡💡

1. **排序**数组，使相邻元素尽量靠近，方便贪心处理。

2. 维护一个变量 `pre` 表示上一个已经选定的不重复数字。

3. 对于当前数 `nums[i]`：
   
   - 它能取的范围是 `[nums[i] - k, nums[i] + k]`；
   
   - 我们希望它尽可能小、但又要大于 `pre`（保证不重复）。
   
   - 因此选取的值为：  
     `x = min(max(nums[i] - k, pre + 1), nums[i] + k)`

4. 若 `x > pre`，说明能选出一个新的不同数，更新 `pre = x`，计数 `res++`。

```java
class Solution {
    public int maxDistinctElements(int[] nums, int k) {
        int n = nums.length;
        int res = 0;
        Arrays.sort(nums);
        int pre = Integer.MIN_VALUE;//维护左边最大数
        for(int i = 0;i < n;i++){
            //当前位置数最小值
            int x = Math.min(Math.max(nums[i] - k,pre + 1),nums[i] + k);
            //nums[i] + k 上界，max(nums[i] - k,pre + 1)下界
            if(x > pre){
                pre = x;
                res++;
            }
        }
        return res;
    }
}
```


